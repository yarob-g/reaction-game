<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ù„Ø¹Ø¨Ø© Ø³Ø±Ø¹Ø© Ø§Ù„ØªÙØ§Ø¹Ù„</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: #111;
      color: #fff;
      font-family: sans-serif;
      text-align: center;
    }
    #game {
      position: relative;
      width: 100%;
      max-width: 300px;
      height: 400px;
      margin: 40px auto;
      background: #222;
      border: 2px solid #fff;
      overflow: hidden;
      touch-action: none;          /* ÙŠÙ…Ù†Ø¹ Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨ */
    }
    #player {
      position: absolute;
      width: 30px;
      height: 30px;
      background: #e74c3c;
      bottom: 10px;
      left: 135px;
    }
    .obstacle {
      position: absolute;
      width: 30px;
      height: 30px;
      background: #ecf0f1;
      top: 0;
    }
    #score {
      font-size: 24px;
      margin-top: 15px;
    }
  </style>
</head>

<body>
  <h1>ğŸ¯ Ù„Ø¹Ø¨Ø© Ø³Ø±Ø¹Ø© Ø§Ù„ØªÙØ§Ø¹Ù„</h1>
  <div id="game">
    <div id="player"></div>
  </div>
  <div id="score">Ø§Ù„Ù†Ù‚Ø§Ø·: 0</div>

  <script>
    const player = document.getElementById("player");
    const game   = document.getElementById("game");
    const scoreE = document.getElementById("score");

    /* Ù…ØªØºÙŠÙ‘Ø±Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø© */
    let posX = 135;     // Ù…ÙˆØ¶Ø¹ Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø£ÙÙ‚ÙŠÙ‹Ø§
    let score = 0;
    let fallSpeed = 5;  // Ø³Ø±Ø¹Ø© Ø³Ù‚ÙˆØ· Ø§Ù„Ø¹Ù‚Ø¨Ø§Øª
    let dragging = false;

    /* --- ØªØ­Ø±ÙŠÙƒ Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø¨Ø§Ù„Ø£Ø³Ù‡Ù… --- */
    document.addEventListener("keydown", (e) => {
      if (e.key === "ArrowLeft"  && posX > 0)   posX -= 10;
      if (e.key === "ArrowRight" && posX < 270) posX += 10;
      player.style.left = posX + "px";
    });

    /* --- ØªØ­Ø±ÙŠÙƒ Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø¨Ø§Ù„Ø³Ø­Ø¨ (Ù…Ø§ÙˆØ³ / Ù„Ù…Ø³) --- */
    player.addEventListener("mousedown",  () => dragging = true);
    player.addEventListener("touchstart", () => dragging = true);

    document.addEventListener("mouseup",  () => dragging = false);
    document.addEventListener("touchend", () => dragging = false);

    document.addEventListener("mousemove", drag);
    document.addEventListener("touchmove", drag);

    function drag(e) {
      if (!dragging) return;
      const clientX = e.touches ? e.touches[0].clientX : e.clientX;
      const rect    = game.getBoundingClientRect();
      posX = clientX - rect.left - player.offsetWidth / 2;
      posX = Math.max(0, Math.min(posX, game.offsetWidth - player.offsetWidth));
      player.style.left = posX + "px";
    }

    /* --- Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù‚Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø© --- */
    function createObstacle() {
      const obs = document.createElement("div");
      obs.classList.add("obstacle");
      obs.style.left = Math.floor(Math.random() * 270) + "px";
      game.appendChild(obs);

      let posY = 0;
      const timer = setInterval(() => {
        posY += fallSpeed;
        obs.style.top = posY + "px";

        /* ØªØµØ§Ø¯Ù… */
        if (posY > 360 && posY < 400 && Math.abs(parseInt(obs.style.left) - posX) < 30) {
          clearInterval(timer);
          alert("Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù„Ø¹Ø¨Ø©! Ù†Ù‚Ø§Ø·Ùƒ: " + score);
          location.reload();
        }

        /* ØªØ¬Ø§ÙˆØ² Ø§Ù„Ø¹Ù‚Ø¨Ø© */
        if (posY > 400) {
          clearInterval(timer);
          obs.remove();
          score++;
          scoreE.textContent = "Ø§Ù„Ù†Ù‚Ø§Ø·: " + score;
        }
      }, 30);
    }

    /* --- Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù‚Ø¨Ø© ÙƒÙ„ Ø«Ø§Ù†ÙŠØ© --- */
    setInterval(createObstacle, 1000);

    /* --- Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø³Ø±Ø¹Ø© ØªØ¯Ø±ÙŠØ¬ÙŠÙ‹Ø§ --- */
    setInterval(() => {
      if (fallSpeed < 15) fallSpeed += 0.5;
    }, 5000);
  </script>
</body>
</html>
